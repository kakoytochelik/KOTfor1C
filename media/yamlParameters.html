<!-- HTML Template for Build Scenario Parameters Manager -->
<!DOCTYPE html>
<html lang="${localeHtmlLang}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${loc.title}</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${webview.cspSource}; font-src ${webview.cspSource}; img-src ${webview.cspSource} https:; script-src 'nonce-${nonce}';">
    <link href="${codiconsUri}" rel="stylesheet">
    <link href="${stylesUri}" rel="stylesheet">
</head>
<body
    data-param-name-placeholder="${loc.parameterNamePlaceholder}"
    data-param-value-placeholder="${loc.parameterValuePlaceholder}"
    data-remove-parameter="${loc.removeParameter}"
    data-override-title="${loc.overrideExistingValue}"
>
    <div class="container">
        <div class="header">
            <h1>${loc.title}</h1>
            <p>${loc.description}</p>
        </div>

        <div class="controls">
            <div class="controls-left">
                <button id="saveBtn" class="button-with-icon">
                    <span class="codicon codicon-save"></span> ${loc.save}
                </button>
            </div>
            <div class="controls-right">
                <div class="help-container">
                    <button id="helpBtn" class="help-button" title="${loc.help}">
                        <span class="codicon codicon-question"></span>
                    </button>
                    <div id="helpTooltip" class="help-tooltip">
                        <div class="help-content">
                            <p class="path-hint">${loc.sectionsHint}</p>
                            <p class="path-hint">${loc.pathHint}</p>
                            <p class="help-link">
                                <a href="https://its.1c.ru/db/sppr2doc#content:124:hdoc" target="_blank">
                                    ${loc.moreInfoOnITS}
                                </a>
                            </p>
                            <p class="help-link">
                                <a href="https://pr-mex.github.io/vanessa-automation/dev/JsonParams/JsonParamsRU/" target="_blank">
                                    ${loc.moreInfoOnVanessa}
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="dropdown-container">
                    <button id="moreActionsBtn" class="button-with-icon compact-action-btn" title="${loc.moreActions}">
                        <span class="codicon codicon-ellipsis"></span> ${loc.moreActions}
                    </button>
                    <div id="moreActionsDropdown" class="dropdown-content">
                        <div class="dropdown-section-title">${loc.buildMoreActionsLabel}</div>
                        <a href="#" id="createBuildFileBtn" class="dropdown-item">
                            <span class="codicon codicon-file-code"></span> ${loc.createFile}
                        </a>
                        <a href="#" id="loadBuildFromJsonBtn" class="dropdown-item">
                            <span class="codicon codicon-folder-opened"></span> ${loc.loadFromJson}
                        </a>
                        <a href="#" id="resetBuildDefaultsBtn" class="dropdown-item">
                            <span class="codicon codicon-discard"></span> ${loc.resetDefaults}
                        </a>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-section-title">${loc.additionalMoreActionsLabel}</div>
                        <a href="#" id="createAdditionalFileBtn" class="dropdown-item">
                            <span class="codicon codicon-file-code"></span> ${loc.saveAdditionalFile}
                        </a>
                        <a href="#" id="loadAdditionalFromJsonBtn" class="dropdown-item">
                            <span class="codicon codicon-folder-opened"></span> ${loc.loadAdditionalFromJson}
                        </a>
                        <a href="#" id="clearAdditionalBtn" class="dropdown-item">
                            <span class="codicon codicon-clear-all"></span> ${loc.clearAdditionalParameters}
                        </a>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-section-title">${loc.globalVarsMoreActionsLabel}</div>
                        <a href="#" id="createGlobalVarsFileBtn" class="dropdown-item">
                            <span class="codicon codicon-file-code"></span> ${loc.saveGlobalVarsFile}
                        </a>
                        <a href="#" id="loadGlobalVarsFromJsonBtn" class="dropdown-item">
                            <span class="codicon codicon-folder-opened"></span> ${loc.loadGlobalVarsFromJson}
                        </a>
                        <a href="#" id="clearGlobalVarsBtn" class="dropdown-item">
                            <span class="codicon codicon-clear-all"></span> ${loc.clearGlobalVariables}
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="tabs" role="tablist" aria-label="${loc.title}">
            <button
                id="buildTabBtn"
                class="tab-btn active"
                role="tab"
                aria-selected="true"
                aria-controls="buildTabPanel"
                data-tab="build"
            >
                ${loc.buildSectionTitle}
            </button>
            <button
                id="additionalTabBtn"
                class="tab-btn"
                role="tab"
                aria-selected="false"
                aria-controls="additionalTabPanel"
                data-tab="additional"
            >
                ${loc.additionalSectionTitle}
            </button>
            <button
                id="globalVarsTabBtn"
                class="tab-btn"
                role="tab"
                aria-selected="false"
                aria-controls="globalVarsTabPanel"
                data-tab="globalVars"
            >
                ${loc.globalVarsSectionTitle}
            </button>
        </div>

        <div class="tab-panels">
            <section id="buildTabPanel" class="tab-panel active" role="tabpanel" aria-labelledby="buildTabBtn">
                <div class="section-summary-text">
                    <span class="section-description">${loc.buildSectionDescription}</span>
                </div>
                <div class="section-content">
                    <div class="section-toolbar">
                        <button id="addBuildRowBtn" class="button-with-icon">
                            <span class="codicon codicon-add"></span> ${loc.addBuildParameter}
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="buildParametersTable">
                            <thead>
                                <tr>
                                    <th>${loc.parameter}</th>
                                    <th>${loc.value}</th>
                                    <th class="actions-header">${loc.actions}</th>
                                </tr>
                            </thead>
                            <tbody id="buildParametersTableBody">
                                ${buildParametersRows}
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="additionalTabPanel" class="tab-panel" role="tabpanel" aria-labelledby="additionalTabBtn" hidden>
                <div class="section-summary-text">
                    <span class="section-description">${loc.additionalSectionDescription}</span>
                </div>
                <div class="section-content">
                    <div class="section-toolbar">
                        <button id="addAdditionalRowBtn" class="button-with-icon">
                            <span class="codicon codicon-add"></span> ${loc.addAdditionalParameter}
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="additionalParametersTable">
                            <thead>
                                <tr>
                                    <th>${loc.parameter}</th>
                                    <th>${loc.value}</th>
                                    <th class="priority-header">${loc.priority}</th>
                                    <th class="actions-header">${loc.actions}</th>
                                </tr>
                            </thead>
                            <tbody id="additionalParametersTableBody">
                                ${additionalParametersRows}
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="globalVarsTabPanel" class="tab-panel" role="tabpanel" aria-labelledby="globalVarsTabBtn" hidden>
                <div class="section-summary-text">
                    <span class="section-description">${loc.globalVarsSectionDescription}</span>
                </div>
                <div class="section-content">
                    <div class="section-toolbar">
                        <button id="addGlobalVarRowBtn" class="button-with-icon">
                            <span class="codicon codicon-add"></span> ${loc.addGlobalVariable}
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="globalVarsTable">
                            <thead>
                                <tr>
                                    <th>${loc.parameter}</th>
                                    <th>${loc.value}</th>
                                    <th class="priority-header">${loc.priority}</th>
                                    <th class="actions-header">${loc.actions}</th>
                                </tr>
                            </thead>
                            <tbody id="globalVarsTableBody">
                                ${globalVariablesRows}
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script type="application/javascript" nonce="${nonce}">
        window.__buildParameters = ${buildParametersJson};
        window.__additionalParameters = ${additionalParametersJson};
        window.__globalVanessaVariables = ${globalVanessaVariablesJson};
        window.__defaultBuildParameters = ${defaultBuildParametersJson};
    </script>
    <script type="application/javascript" nonce="${nonce}" src="${scriptUri}"></script>
</body>
</html>
