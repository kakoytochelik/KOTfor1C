{
  "name": "kot-test-toolkit",
  "displayName": "%ext.displayName%",
  "description": "%ext.description%",
  "icon": "res/icons/KOTfor1C.png",
  "publisher": "AlexeyEremeev",
  "author": {
    "name": "Alexey Eremeev"
  },
  "license": "MIT",
  "repository": "https://github.com/kakoytochelik/KOTfor1C",
  "version": "2.0.0",
  "engines": {
    "vscode": "^1.98.0"
  },
  "l10n": "./l10n",
  "categories": [
    "Testing",
    "Other"
  ],
  "activationEvents": [
    "onStartupFinished"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "configuration": [
      {
        "title": "%config.generalTitle%",
        "properties": {
          "kotTestToolkit.localization.languageOverride": {
            "type": "string",
            "default": "System",
            "enum": [
              "System",
              "English",
              "Русский"
            ],
            "enumDescriptions": [
              "%config.localization.system.desc%",
              "%config.localization.en.desc%",
              "%config.localization.ru.desc%"
            ],
            "description": "%config.localization.languageOverride.description%",
            "order": 1
          }
        }
      },
      {
        "title": "%config.phaseSwitcherSettings.title%",
        "properties": {
          "kotTestToolkit.assembleScript.showDriveFeatures": {
            "type": "boolean",
            "default": false,
            "description": "%config.assembleScript.showDriveFeatures.description%",
            "order": 1
          },
          "kotTestToolkit.phaseSwitcher.highlightAffectedMainScenarios": {
            "type": "boolean",
            "default": true,
            "description": "%config.phaseSwitcher.highlightAffectedMainScenarios.description%",
            "order": 2
          },
          "kotTestToolkit.phaseSwitcher.autoAddNewScenariosToFavorites": {
            "type": "boolean",
            "default": true,
            "description": "%config.phaseSwitcher.autoAddNewScenariosToFavorites.description%",
            "order": 3
          }
        }
      },
      {
        "title": "%config.editorSettings.title%",
        "properties": {
          "kotTestToolkit.editor.autoCollapseOnOpen": {
            "type": "boolean",
            "default": true,
            "description": "%config.autoCollapseOnOpen.description%",
            "order": 1
          },
          "kotTestToolkit.editor.autoReplaceTabsWithSpacesOnSave": {
            "type": "boolean",
            "default": true,
            "description": "%config.autoReplaceTabsWithSpacesOnSave.description%",
            "order": 2
          },
          "kotTestToolkit.editor.autoAlignNestedScenarioParametersOnSave": {
            "type": "boolean",
            "default": true,
            "description": "%config.autoAlignNestedScenarioParametersOnSave.description%",
            "order": 3
          },
          "kotTestToolkit.editor.autoAlignGherkinTablesOnSave": {
            "type": "boolean",
            "default": true,
            "description": "%config.autoAlignGherkinTablesOnSave.description%",
            "order": 4
          },
          "kotTestToolkit.editor.autoFillNestedScenariosOnSave": {
            "type": "boolean",
            "default": true,
            "description": "%config.autoFillNestedScenariosOnSave.description%",
            "order": 5
          },
          "kotTestToolkit.editor.autoFillScenarioParametersOnSave": {
            "type": "boolean",
            "default": true,
            "description": "%config.autoFillScenarioParametersOnSave.description%",
            "order": 6
          },
          "kotTestToolkit.editor.showRefillMessages": {
            "type": "boolean",
            "default": true,
            "description": "%config.showRefillMessages.description%",
            "order": 7
          },
          "kotTestToolkit.editor.newScenarioLanguage": {
            "type": "string",
            "default": "en",
            "enum": [
              "en",
              "ru"
            ],
            "enumDescriptions": [
              "%config.editor.newScenarioLanguage.en.desc%",
              "%config.editor.newScenarioLanguage.ru.desc%"
            ],
            "description": "%config.editor.newScenarioLanguage.description%",
            "order": 8
          }
        }
      },
      {
        "title": "%config.diagnosticsSettings.title%",
        "properties": {
          "kotTestToolkit.steps.externalUrl": {
            "type": "string",
            "default": "https://raw.githubusercontent.com/kakoytochelik/KOTfor1C/main/res/steps.htm",
            "description": "%config.stepsExternalUrl.description%",
            "order": 1
          },
          "kotTestToolkit.editor.checkRelatedParentScenarios": {
            "type": "boolean",
            "default": true,
            "description": "%config.checkRelatedParentScenarios.description%",
            "order": 2
          }
        }
      },
      {
        "title": "%config.assemblySettings.title%",
        "properties": {
          "kotTestToolkit.assembleScript.showOutputPanel": {
            "type": "boolean",
            "default": false,
            "description": "%config.showOutputPanel.description%",
            "order": 1
          },
          "kotTestToolkit.output.advancedLogging": {
            "type": "boolean",
            "default": false,
            "description": "%config.output.advancedLogging.description%",
            "order": 2
          },
          "kotTestToolkit.paths.openBuildScenarioParametersManager": {
            "type": "null",
            "default": null,
            "description": "%config.paths.openBuildScenarioParametersManager.description%",
            "markdownDescription": "%config.paths.openBuildScenarioParametersManager.markdownDescription%",
            "order": 3
          }
        }
      },
      {
        "title": "%config.vanessaSettings.title%",
        "properties": {
          "kotTestToolkit.runVanessa.vanessaEpfPath": {
            "type": "string",
            "default": "tools/vanessa/vanessa-automation.epf",
            "description": "%config.runVanessa.vanessaEpfPath.description%",
            "order": 1
          },
          "kotTestToolkit.runVanessa.runtimeDirectory": {
            "type": "string",
            "default": ".vscode/kot-runtime/vanessa",
            "description": "%config.runVanessa.runtimeDirectory.description%",
            "order": 2
          },
          "kotTestToolkit.runVanessa.commandTemplate": {
            "type": "string",
            "default": "",
            "description": "%config.runVanessa.commandTemplate.description%",
            "markdownDescription": "%config.runVanessa.commandTemplate.markdownDescription%",
            "order": 3
          },
          "kotTestToolkit.runVanessa.checkUnsafeActionProtection": {
            "type": "boolean",
            "default": true,
            "description": "%config.runVanessa.checkUnsafeActionProtection.description%",
            "order": 4
          },
          "kotTestToolkit.runVanessa.liveLogRefreshSeconds": {
            "type": "number",
            "default": 2,
            "minimum": 1,
            "maximum": 60,
            "description": "%config.runVanessa.liveLogRefreshSeconds.description%",
            "order": 5
          }
        }
      },
      {
        "title": "%config.startupParameters.title%",
        "properties": {
          "kotTestToolkit.startupParams.parameters": {
            "type": "string",
            "default": "/L ru /DisableStartupMessages /DisableStartupDialogs",
            "description": "%config.startupParams.parameters.description%",
            "order": 1
          }
        }
      },
      {
        "title": "%config.pathsSettings.title%",
        "properties": {
          "kotTestToolkit.paths.yamlSourceDirectory": {
            "type": "string",
            "default": "tests/RegressionTests/yaml",
            "description": "%config.paths.yamlSourceDirectory.description%",
            "order": 1
          },
          "kotTestToolkit.paths.buildScenarioBddEpf": {
            "type": "string",
            "default": "build/BuildScenarioBDD.epf",
            "description": "%config.paths.buildScenarioBddEpf.description%",
            "order": 2
          },
          "kotTestToolkit.assembleScript.buildPath": {
            "type": "string",
            "default": "C:\\EtalonDrive\\",
            "description": "%config.buildPath.description%",
            "order": 3
          },
          "kotTestToolkit.paths.emptyInfobase": {
            "type": "string",
            "default": "",
            "description": "%config.emptyInfobase.description%",
            "order": 4
          },
          "kotTestToolkit.paths.oneCEnterpriseExe": {
            "type": "string",
            "default": "C:\\Program Files (x86)\\1cv8\\8.3.24.1738\\bin\\1cv8.exe",
            "description": "%config.oneCEnterpriseExe.description%",
            "order": 5
          },
          "kotTestToolkit.paths.fileWorkshopExe": {
            "type": "string",
            "default": "C:\\Program Files (x86)\\1cv8fv\\bin\\1cv8fv.exe",
            "description": "%config.fileWorkshopExe.description%",
            "order": 6
          },
          "kotTestToolkit.paths.firstLaunchFolder": {
            "type": "string",
            "default": "",
            "description": "%config.paths.firstLaunchFolder.description%",
            "order": 7
          }
        }
      }
    ],
    "commands": [
      {
        "command": "kotTestToolkit.openSubscenario",
        "title": "%cmd.openSubscenario.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.findCurrentFileReferences",
        "title": "%cmd.findCurrentFileReferences.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.createNestedScenario",
        "title": "%cmd.createNestedScenario.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.createMainScenario",
        "title": "%cmd.createMainScenario.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.insertNestedScenarioRef",
        "title": "%cmd.insertNestedScenarioRef.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.insertScenarioParam",
        "title": "%cmd.insertScenarioParam.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.insertUid",
        "title": "%cmd.insertUid.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.refreshGherkinSteps",
        "title": "%cmd.refreshGherkinSteps.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.replaceTabsWithSpacesYaml",
        "title": "%cmd.replaceTabsWithSpacesYaml.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.checkAndFillNestedScenarios",
        "title": "%cmd.checkAndFillNestedScenarios.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.checkAndFillScriptParameters",
        "title": "%cmd.checkAndFillScriptParameters.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.openMxlFileFromExplorer",
        "title": "%cmd.openMxlFileFromExplorer.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.openMxlFile",
        "title": "%cmd.openMxlFile.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.revealFileInExplorer",
        "title": "%cmd.revealFileInExplorer.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.revealFileInOS",
        "title": "%cmd.revealFileInOS.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.openBuildFolder",
        "title": "%cmd.openBuildFolder.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.createFirstLaunchZip",
        "title": "%cmd.createFirstLaunchZip.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.openYamlParametersManager",
        "title": "%cmd.openYamlParametersManager.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.fixScenarioIssues",
        "title": "%cmd.fixScenarioIssues.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.scanWorkspaceDiagnostics",
        "title": "%cmd.scanWorkspaceDiagnostics.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.openScenarioInVanessaManual",
        "title": "%cmd.openScenarioInVanessaManual.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.addActiveScenarioToFavorites",
        "title": "%cmd.addActiveScenarioToFavorites.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.removeActiveScenarioFromFavorites",
        "title": "%cmd.removeActiveScenarioFromFavorites.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.toggleActiveScenarioFavorite",
        "title": "%cmd.toggleActiveScenarioFavorite.title%",
        "category": "%cmd.category%"
      },
      {
        "command": "kotTestToolkit.showFavoriteScenarios",
        "title": "%cmd.showFavoriteScenarios.title%",
        "category": "%cmd.category%"
      }
    ],
    "submenus": [
      {
        "id": "kotTestToolkit.editorContext.workWithFiles",
        "label": "%submenu.editorContext.workWithFiles%"
      },
      {
        "id": "kotTestToolkit.editorContext.create",
        "label": "%submenu.editorContext.create%"
      },
      {
        "id": "kotTestToolkit.editorContext.editing",
        "label": "%submenu.editorContext.editing%"
      }
    ],
    "keybindings": [
      {
        "command": "kotTestToolkit.openSubscenario",
        "key": "ctrl+alt+=",
        "win": "ctrl+alt+=",
        "mac": "cmd+alt+=",
        "linux": "ctrl+alt+=",
        "when": "editorTextFocus && !editorReadonly"
      },
      {
        "command": "kotTestToolkit.findCurrentFileReferences",
        "key": "ctrl+alt+J",
        "win": "ctrl+alt+J",
        "mac": "cmd+alt+J",
        "linux": "ctrl+alt+J",
        "when": "editorTextFocus && !editorReadonly"
      },
      {
        "command": "kotTestToolkit.insertNestedScenarioRef",
        "key": "ctrl+alt+N",
        "win": "ctrl+alt+N",
        "mac": "cmd+alt+N",
        "linux": "ctrl+alt+N",
        "when": "editorTextFocus && !editorReadonly"
      },
      {
        "command": "kotTestToolkit.insertScenarioParam",
        "key": "ctrl+alt+M",
        "win": "ctrl+alt+M",
        "mac": "cmd+alt+M",
        "linux": "ctrl+alt+M",
        "when": "editorTextFocus && !editorReadonly"
      },
      {
        "command": "kotTestToolkit.insertUid",
        "key": "ctrl+alt+U",
        "win": "ctrl+alt+U",
        "mac": "cmd+alt+U",
        "linux": "ctrl+alt+U",
        "when": "editorTextFocus && !editorReadonly"
      }
    ],
    "menus": {
      "explorer/context": [
        {
          "command": "kotTestToolkit.openMxlFileFromExplorer",
          "when": "resourceExtname == .mxl",
          "group": "00_mxl@0"
        }
      ],
      "editor/context": [
        {
          "command": "kotTestToolkit.openSubscenario",
          "when": "editorTextFocus && resourceExtname == .yaml",
          "group": "00_navigation@0"
        },
        {
          "command": "kotTestToolkit.findCurrentFileReferences",
          "when": "editorTextFocus && !editorReadonly && resourceExtname == .yaml",
          "group": "00_navigation@1"
        },
        {
          "command": "kotTestToolkit.addActiveScenarioToFavorites",
          "when": "editorTextFocus && !editorReadonly && resourceExtname == .yaml && !kotTestToolkit.activeScenarioInFavorites",
          "group": "00_navigation@2"
        },
        {
          "command": "kotTestToolkit.removeActiveScenarioFromFavorites",
          "when": "editorTextFocus && !editorReadonly && resourceExtname == .yaml && kotTestToolkit.activeScenarioInFavorites",
          "group": "00_navigation@2"
        },
        {
          "submenu": "kotTestToolkit.editorContext.workWithFiles",
          "when": "editorTextFocus && resourceExtname == .yaml",
          "group": "01_submenu@0"
        },
        {
          "submenu": "kotTestToolkit.editorContext.create",
          "when": "editorTextFocus && !editorReadonly && resourceExtname == .yaml",
          "group": "01_submenu@1"
        },
        {
          "submenu": "kotTestToolkit.editorContext.editing",
          "when": "editorTextFocus && resourceExtname == .yaml",
          "group": "01_submenu@2"
        }
      ],
      "kotTestToolkit.editorContext.workWithFiles": [
        {
          "command": "kotTestToolkit.openMxlFile",
          "when": "editorTextFocus && editorHasSelection && resourceExtname == .yaml",
          "group": "00_workWithFiles@0"
        },
        {
          "command": "kotTestToolkit.revealFileInExplorer",
          "when": "editorTextFocus && editorHasSelection && resourceExtname == .yaml",
          "group": "00_workWithFiles@1"
        },
        {
          "command": "kotTestToolkit.revealFileInOS",
          "when": "editorTextFocus && editorHasSelection && resourceExtname == .yaml",
          "group": "00_workWithFiles@2"
        }
      ],
      "kotTestToolkit.editorContext.create": [
        {
          "command": "kotTestToolkit.createNestedScenario",
          "when": "editorTextFocus && !editorReadonly && resourceExtname == .yaml",
          "group": "00_create@0"
        },
        {
          "command": "kotTestToolkit.createMainScenario",
          "when": "editorTextFocus && !editorReadonly && resourceExtname == .yaml",
          "group": "00_create@1"
        }
      ],
      "kotTestToolkit.editorContext.editing": [
        {
          "command": "kotTestToolkit.checkAndFillNestedScenarios",
          "when": "editorTextFocus && resourceExtname == .yaml",
          "group": "00_editing@0"
        },
        {
          "command": "kotTestToolkit.checkAndFillScriptParameters",
          "when": "editorTextFocus && resourceExtname == .yaml",
          "group": "00_editing@1"
        },
        {
          "command": "kotTestToolkit.insertUid",
          "when": "editorTextFocus && !editorReadonly && resourceExtname == .yaml",
          "group": "00_editing@2"
        }
      ],
      "commandPalette": [
        {
          "command": "kotTestToolkit.refreshGherkinSteps",
          "when": "true"
        },
        {
          "command": "kotTestToolkit.replaceTabsWithSpacesYaml",
          "when": "true"
        },
        {
          "command": "kotTestToolkit.checkAndFillNestedScenarios",
          "when": "true"
        },
        {
          "command": "kotTestToolkit.checkAndFillScriptParameters",
          "when": "true"
        },
        {
          "command": "kotTestToolkit.createFirstLaunchZip",
          "when": "true"
        },
        {
          "command": "kotTestToolkit.openYamlParametersManager",
          "when": "true"
        },
        {
          "command": "kotTestToolkit.fixScenarioIssues",
          "when": "true"
        },
        {
          "command": "kotTestToolkit.scanWorkspaceDiagnostics",
          "when": "true"
        },
        {
          "command": "kotTestToolkit.openScenarioInVanessaManual",
          "when": "true"
        },
        {
          "command": "kotTestToolkit.toggleActiveScenarioFavorite",
          "when": "true"
        },
        {
          "command": "kotTestToolkit.addActiveScenarioToFavorites",
          "when": "false"
        },
        {
          "command": "kotTestToolkit.removeActiveScenarioFromFavorites",
          "when": "false"
        },
        {
          "command": "kotTestToolkit.showFavoriteScenarios",
          "when": "true"
        }
      ]
    },
    "viewsContainers": {
      "activitybar": [
        {
          "id": "kotTestToolkitContainer",
          "title": "%ext.displayName%",
          "icon": "res/icons/KOTfor1CTransparent.png"
        }
      ]
    },
    "views": {
      "kotTestToolkitContainer": [
        {
          "id": "kotTestToolkit.phaseSwitcherView",
          "name": "%view.phaseSwitcher.name%",
          "type": "webview",
          "contextualTitle": "%view.phaseSwitcher.contextualTitle%"
        }
      ]
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run copy-codicons && npm run esbuild-base -- --minify",
    "compile": "npm run copy-codicons && npm run esbuild-base -- --sourcemap",
    "watch": "npm run copy-codicons && npm run esbuild-base -- --sourcemap --watch",
    "copy-codicons": "cpy node_modules/@vscode/codicons/dist/codicon.css node_modules/@vscode/codicons/dist/codicon.ttf media --flat",
    "esbuild-base": "esbuild ./src/extension.ts --bundle --outfile=out/extension.js --external:vscode --format=cjs --platform=node",
    "test": "vscode-test"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.10",
    "@types/node": "20.x",
    "@types/uuid": "^10.0.0",
    "@types/vscode": "^1.98.0",
    "@typescript-eslint/eslint-plugin": "^8.28.0",
    "@typescript-eslint/parser": "^8.28.0",
    "@vscode/codicons": "^0.0.44",
    "@vscode/test-cli": "^0.0.10",
    "@vscode/test-electron": "^2.4.1",
    "cpy-cli": "^5.0.0",
    "eslint": "^9.23.0",
    "typescript": "^5.8.2"
  },
  "dependencies": {
    "node-html-parser": "^7.0.1",
    "uuid": "^11.1.0"
  }
}
